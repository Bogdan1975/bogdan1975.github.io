System.register(["angular2/core"],function(l,n){var f=this&&this.__decorate||function(b,a,e,h){var d=arguments.length,c=3>d?a:null===h?h=Object.getOwnPropertyDescriptor(a,e):h,f;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(b,a,e,h);else for(var g=b.length-1;0<=g;g--)if(f=b[g])c=(3>d?f(c):3<d?f(a,e,c):f(a,e))||c;return 3<d&&c&&Object.defineProperty(a,e,c),c},d=this&&this.__metadata||function(b,a){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(b,
a)},c,g,k,m;return{setters:[function(b){c=b}],execute:function(){g=function(){return function(){}}();l("BoundingRectClass",g);k=function(){return function(b,a){this.type=b;this.instance=a}}();l("EventSlideAble",k);m=function(){function b(a,e){this.el=a;this.renderer=e;this.step=1;this.parent=null;this.startSlidingEvent=new c.EventEmitter;this.slidingEvent=new c.EventEmitter;this.stopSlidingEvent=new c.EventEmitter;this.initEvent=new c.EventEmitter;this.signatures={top:"",left:"",bottom:"",right:""};
this.dynamicLimits={};this.lastY=this.lastX=this.checkYBeforeRedraw=this.checkXBeforeRedraw=null;console.log("SliadableDirective")}Object.defineProperty(b.prototype,"boundElement",{set:function(a){this.signatures={top:a+":top",bottom:a+":bottom",left:a+":left",right:a+":right"}},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"rightEdge",{set:function(a){this.signatures.right=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"leftEdge",{set:function(a){this.signatures.left=
a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"topEdge",{set:function(a){this.signatures.top=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"bottomEdge",{set:function(a){this.signatures.bottom=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dynamicRightLimit",{set:function(a){this.dynamicLimits.right=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dynamicLeftLimit",{set:function(a){this.dynamicLimits.left=a},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dynamicTopLimit",{set:function(a){this.dynamicLimits.top=a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"dynamicBottomLimit",{set:function(a){this.dynamicLimits.bottom=a},enumerable:!0,configurable:!0});b.prototype.ngOnInit=function(){this.dynamicLimitRect=this.dynamicLimitRect||new g;this.direction=this.direction||"both";this.signatures.left||(this.signatures.left="parent:left");this.signatures.right||(this.signatures.right=
"parent:right");this.signatures.top||(this.signatures.top="parent:top");this.signatures.bottom||(this.signatures.bottom="parent:bottom");this.initEvent.emit(new k("init",this))};b.prototype.ngAfterViewInit=function(){if(this.normalStyle)for(var a in this.normalStyle)this.renderer.setElementStyle(this.el.nativeElement,a,this.normalStyle[a]);if(this.slidingStyle)for(a in this.backupStyle={},this.slidingStyle)this.backupStyle[a]=window.getComputedStyle(this.el.nativeElement).getPropertyValue(a)};b.prototype.slideStart=
function(a){document.ondragstart=function(){return!1};document.body.onselectstart=function(){return!1};this.calcDynamicLimits();document.onmousemove=function(a){this.redraw(a.clientX,a.clientY)}.bind(this);document.onmouseup=this.slideStop.bind(this);if(this.slidingStyle)for(var e in this.slidingStyle)this.renderer.setElementStyle(this.el.nativeElement,e,this.slidingStyle[e]);this.startSlidingEvent.emit(this.prepareEventData("start"))};b.prototype.redraw=function(a,e){this.boundingRect||(this.boundingRect=
new g,this.calcMargins());this.zeroLeft&&this.zeroTop||(this.zeroLeft=this.el.nativeElement.getBoundingClientRect().left-parseInt(getComputedStyle(this.el.nativeElement).left),this.zeroTop=this.el.nativeElement.getBoundingClientRect().top-parseInt(getComputedStyle(this.el.nativeElement).top));if("horisontal"==this.direction||"both"==this.direction){if(this.lastX){var b=(a-this.lastX)/this.step;a=this.lastX+Math.round(b)*this.step}-.5>a-this.boundingRect.left&&(a=this.lastX+Math.ceil((this.boundingRect.left-
this.lastX)/this.step)*this.step);.5<a-this.boundingRect.right&&(a=this.lastX+Math.floor((this.boundingRect.right-this.lastX)/this.step)*this.step);this.dynamicLimitRect.left&&a<this.dynamicLimitRect.left&&(a=this.dynamicLimitRect.left);this.dynamicLimitRect.right&&a>this.dynamicLimitRect.right&&(a=this.dynamicLimitRect.right);"function"===typeof this.checkXBeforeRedraw&&!this.checkXBeforeRedraw(a,e)||a==this.lastX||(this.el.nativeElement.style.left=a-this.zeroLeft-Math.round(this.el.nativeElement.getBoundingClientRect().width/
2)+"px",this.lastX=a)}if("vertical"==this.direction||"both"==this.direction)this.lastY&&(b=(e-this.lastY)/this.step,e=this.lastY+Math.round(b)*this.step),-.5>e-this.boundingRect.top&&(e=this.lastY+Math.ceil((this.boundingRect.top-this.lastY)/this.step)*this.step),.5<e-this.boundingRect.bottom&&(e=this.lastY+Math.floor((this.boundingRect.bottom-this.lastY)/this.step)*this.step),this.dynamicLimitRect.top&&e<this.dynamicLimitRect.top&&(e=this.dynamicLimitRect.top),this.dynamicLimitRect.bottom&&e>this.dynamicLimitRect.bottom&&
(e=this.dynamicLimitRect.bottom),"function"===typeof this.checkYBeforeRedraw&&!this.checkYBeforeRedraw(a,e)||e==this.lastY||(this.el.nativeElement.style.top=e-this.zeroTop-Math.round(this.el.nativeElement.getBoundingClientRect().height/2)+"px",this.lastY=e);this.slidingEvent.emit(this.prepareEventData("sliding"))};b.prototype.slideStop=function(a){this.stopSlidingEvent.emit(this.prepareEventData("stop"));document.onmousemove=null;document.onmouseup=null;if(this.backupStyle)for(var b in this.backupStyle)this.renderer.setElementStyle(this.el.nativeElement,
b,this.backupStyle[b])};b.prototype.prepareEventData=function(a){a=new k(a,this);a.boundingRect=this.el.nativeElement.getBoundingClientRect();a.relativePercentHorisontal=Math.round(100*(a.boundingRect.left+Math.round(a.boundingRect.width/2)-this.boundingRect.left)/(this.boundingRect.right-this.boundingRect.left));a.relativePercentVertical=Math.round(100*(a.boundingRect.top+Math.round(a.boundingRect.height/2)-this.boundingRect.top)/(this.boundingRect.bottom-this.boundingRect.top));a.elementId=this.el.nativeElement.id;
return a};b.prototype.calcMargins=function(){for(var a in this.signatures){var b=void 0,c=void 0,c=this.splitSignature(this.signatures[a]),b=c[0],c=c[1];if(!c){if("top"==a||"bottom"==a)c="center-y";if("left"==a||"right"==a)c="center-x"}b=this.getMargin(b,c);this.boundingRect[a]=b}};b.prototype.calcDynamicLimits=function(){for(var a in this.dynamicLimits)if(this.dynamicLimits[a]){var b=void 0,c=void 0,c=this.splitSignature(this.dynamicLimits[a]),b=c[0],c=c[1];if(!c){if("top"==a||"bottom"==a)c="center-y";
if("left"==a||"right"==a)c="center-x"}b=this.getMargin(b,c);this.dynamicLimitRect[a]=b}};b.prototype.splitSignature=function(a){var b=a.split(":",2);a=b[1];""==b[0]?b=this.el.nativeElement.parentElement:(b=document.getElementById(b[0]),b||(b=this.el.nativeElement.parentElement));return[b||null,a||null]};b.prototype.getMargin=function(a,b){var c=a.getBoundingClientRect();b=b.toLowerCase();switch(b){case "left":case "right":case "top":case "bottom":c=c[b];break;case "center-x":c=c.left+Math.round(c.width/
2);break;case "center-y":c=c.top+Math.round(c.height/2);break;default:c=null}return c};f([c.Input("slideDirection"),d("design:type",String)],b.prototype,"direction",void 0);f([c.Input(),d("design:type",Object),d("design:paramtypes",[Object])],b.prototype,"boundElement",null);f([c.Input(),d("design:type",String),d("design:paramtypes",[String])],b.prototype,"rightEdge",null);f([c.Input(),d("design:type",String),d("design:paramtypes",[String])],b.prototype,"leftEdge",null);f([c.Input(),d("design:type",
String),d("design:paramtypes",[String])],b.prototype,"topEdge",null);f([c.Input(),d("design:type",String),d("design:paramtypes",[String])],b.prototype,"bottomEdge",null);f([c.Input(),d("design:type",String),d("design:paramtypes",[String])],b.prototype,"dynamicRightLimit",null);f([c.Input(),d("design:type",String),d("design:paramtypes",[String])],b.prototype,"dynamicLeftLimit",null);f([c.Input(),d("design:type",String),d("design:paramtypes",[String])],b.prototype,"dynamicTopLimit",null);f([c.Input(),
d("design:type",String),d("design:paramtypes",[String])],b.prototype,"dynamicBottomLimit",null);f([c.Input(),d("design:type",Object)],b.prototype,"normalStyle",void 0);f([c.Input(),d("design:type",Object)],b.prototype,"slidingStyle",void 0);f([c.Input(),d("design:type",Object)],b.prototype,"step",void 0);f([c.Input(),d("design:type",Object)],b.prototype,"parent",void 0);f([c.Output("onStartSliding"),d("design:type",Object)],b.prototype,"startSlidingEvent",void 0);f([c.Output("onSliding"),d("design:type",
Object)],b.prototype,"slidingEvent",void 0);f([c.Output("onStopSliding"),d("design:type",Object)],b.prototype,"stopSlidingEvent",void 0);f([c.Output("onInit"),d("design:type",Object)],b.prototype,"initEvent",void 0);return b=f([c.Directive({selector:"[slideAble]",host:{"(mousedown)":"slideStart($event)"}}),d("design:paramtypes",[c.ElementRef,c.Renderer])],b)}();l("SlideAbleDirective",m)}}});
